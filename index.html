<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Coloring Book</title>
  <style>
    * { box-sizing: border-box; margin:0; padding:0 }
    html, body { width:100%; height:100%; overflow:hidden; }
    #toolbar { display:flex; gap:8px; background:#eee; padding:8px; }
    #palette { display:flex; overflow-x:auto; padding:4px; background:#fafafa; cursor:grab; }
    .color-btn { flex:none; width:25px; height:25px; margin-right:4px; border:1px solid #999; border-radius:3px; }
    .color-btn:hover { border-color:#333; }
    #canvas-container { flex:1; overflow:auto; background:#ddd; cursor:grab; }
    body > div:nth-child(1), #palette, #canvas-container { position: relative; }
    #canvas { display:block; }
  </style>
</head>
<body>
  <div id="toolbar">
    <button id="prev">Prev</button>
    <button id="next">Next</button>
    <button id="undo">Undo</button>
    <button id="redo">Redo</button>
    <button id="clear">Clear</button>
    <button id="download">Download</button>
  </div>
  <div id="palette"></div>
  <div id="canvas-container"><canvas id="canvas"></canvas></div>

  <script>
    /*** CONFIG ***/
    const COLORS = [
      "#000","#f00","#0f0","#00f","#ff0","#0ff","#f0f",
      "#888","#444","#ccc","#a52a2a","#ff69b4","#800080","#ffa500"
    ];
    const PAGES = [
      'https://i.postimg.cc/TPZTn08W/0f00c43f3775ba5fcce443f4885aa56e.jpg',
  'https://i.postimg.cc/JnZMxXmY/bunny-carrot-coloring-page-600nw-2414476443.jpg',
  'https://i.postimg.cc/Bv8q8yz0/36-girl-with-butterfly-wings-to-color.jpg',
  'https://i.postimg.cc/Bv8q8yz0/36-girl-with-butterfly-wings-to-color.jpg',
  'https://i.postimg.cc/pLsT5KXD/6331b296558cf1f8f7fd87cc9154f432.jpg',
  'https://i.postimg.cc/2yYmK5Sk/7113dc553901fe5719b2c9e221449e28.jpg',
  'https://i.postimg.cc/MKxKs9n7/adorable-fun-kids-coloring-page-delight-freepik-908673-3027.jpg',
  'https://i.postimg.cc/MKxKs9n7/adorable-fun-kids-coloring-page-delight-freepik-908673-3027.jpg',
  'https://i.postimg.cc/jS1TrcSk/Barbie-10.jpg',
  'https://i.postimg.cc/FsDmTN5v/Barbie-24.jpg',
  'https://i.postimg.cc/FsDmTN5v/Barbie-24.jpg',
  'https://i.postimg.cc/j2YdYXZr/Barbie-27.jpg',
  'https://i.postimg.cc/tTxCcfd5/Barbie-6.jpg'
    ]; // update with your pages

    /*** SETUP ***/
    const canvas = document.getElementById("canvas"),
          ctx = canvas.getContext("2d");
    const palette = document.getElementById("palette"),
          container = document.getElementById("canvas-container");
    const btnUndo = document.getElementById("undo"),
          btnRedo = document.getElementById("redo"),
          btnPrev = document.getElementById("prev"),
          btnNext = document.getElementById("next"),
          btnClear = document.getElementById("clear"),
          btnDownload = document.getElementById("download");

    /*** STATE ***/
    let brushColor = "#000", brushSize = 4;
    let drawing = false, lastX = 0, lastY = 0;
    let pageIndex = 0;
    const history = [], future = [];

    /*** PALETTE ***/
    COLORS.forEach(c => {
      const b = document.createElement("div");
      b.className = "color-btn";
      b.style.background = c;
      b.addEventListener("click", () => brushColor = c);
      palette.appendChild(b);
    });

    /*** LOAD PAGE ***/
    function loadPage() {
      const img = new Image();
      img.onload = () => {
        canvas.width = img.width;
        canvas.height = img.height;
        ctx.drawImage(img, 0, 0);
        history.length = future.length = 0;
        saveState();
      };
      img.src = PAGES[pageIndex];
    }

    /*** HISTORY ***/
    function saveState() {
      history.push(canvas.toDataURL());
      if (history.length > 50) history.shift();
      future.length = 0;
    }
    function restoreState(arrFrom, arrTo) {
      if (arrFrom.length === 0) return;
      arrTo.push(canvas.toDataURL());
      const img = new Image();
      img.onload = () => ctx.drawImage(img, 0, 0);
      img.src = arrFrom.pop();
    }

    /*** EVENT LISTENERS ***/
    canvas.addEventListener("mousedown", e => {
      drawing = true;
      [lastX, lastY] = [e.offsetX, e.offsetY];
    });
    canvas.addEventListener("mousemove", e => {
      if (!drawing) return;
      ctx.strokeStyle = brushColor;
      ctx.lineWidth = brushSize;
      ctx.lineCap = 'round';
      ctx.beginPath();
      ctx.moveTo(lastX, lastY);
      ctx.lineTo(e.offsetX, e.offsetY);
      ctx.stroke();
      [lastX, lastY] = [e.offsetX, e.offsetY];
    });
    canvas.addEventListener("mouseup", () => { drawing = false; saveState(); });
    canvas.addEventListener("mouseout", () => drawing = false);

    btnUndo.addEventListener("click", () => restoreState(history, future));
    btnRedo.addEventListener("click", () => restoreState(future, history));
    btnClear.addEventListener("click", () => { ctx.clearRect(0,0,canvas.width,canvas.height); saveState(); });
    btnPrev.addEventListener("click", () => {
      if (pageIndex > 0) { pageIndex--; loadPage(); }
    });
    btnNext.addEventListener("click", () => {
      if (pageIndex < PAGES.length - 1) { pageIndex++; loadPage(); }
    });
    btnDownload.addEventListener("click", () => {
      const a = document.createElement("a");
      a.download = `drawing-page${pageIndex+1}.png`;
      a.href = canvas.toDataURL("image/png");
      a.click();
    });

    /*** DRAG-PAN ***/
    function makeDraggable(el) {
      let isDown = false, startX, startY;
      el.addEventListener("pointerdown", e => {
        isDown = true;
        startX = e.clientX;
        startY = e.clientY;
        el.style.cursor = "grabbing";
      });
      el.addEventListener("pointermove", e => {
        if (!isDown) return;
        el.scrollLeft -= e.clientX - startX;
        el.scrollTop  -= e.clientY - startY;
        [startX, startY] = [e.clientX, e.clientY];
      });
      ["pointerup","pointerleave"].forEach(evn => el.addEventListener(evn, () => {
        isDown = false;
        el.style.cursor = "grab";
      }));
    }
    makeDraggable(palette);
    makeDraggable(container);

    /*** START ***/
    loadPage();
  </script>
</body>
</html>
