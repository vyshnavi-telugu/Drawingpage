<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Coloring Book App</title>
  <style>
    body { margin:0; padding:0; font-family: sans-serif; }
    .view { display:none; padding:20px; text-align:center; }
    .view.active { display:block; }
    img { max-width:150px; margin:10px; border:2px solid #333; cursor:pointer; }
    #canvas { border:1px solid #ccc; width:300px; height:300px; }
  </style>
</head>
<body>

<!-- Home view -->
<div id="home" class="view active">
  <h1>Home</h1>
  <button id="openLibrary">Open Library</button>
  <button id="openPages">Coloring Book</button>
</div>

<!-- Library view -->
<div id="library" class="view">
  <h1>Library</h1>
  <div id="savedList"></div>
  <button id="backFromLibrary">⬅ Back</button>
</div>

<!-- Page selector -->
<div id="pageSelect" class="view">
  <h1>Select a Coloring Page</h1>
  <div id="pageList"></div>
  <button id="backFromPages">⬅ Back</button>
</div>

<!-- Drawing view -->
<div id="drawing" class="view">
  <h1>Drawing</h1>
  <canvas id="canvas" width="300" height="300"></canvas><br />
  <button id="backFromDrawing">⬅ Back</button>
</div>

<script>
// DATA
const drawings = [
  'https://i.postimg.cc/TPZTn08W/0f00c43f3775ba5fcce443f4885aa56e.jpg',
  'https://i.postimg.cc/JnZMxXmY/bunny-carrot-coloring-page-600nw-2414476443.jpg',
  'https://i.postimg.cc/TPZTn08W/0f00c43f3775ba5fcce443f4885aa56e.jpg',
  'https://i.postimg.cc/JnZMxXmY/bunny-carrot-coloring-page-600nw-2414476443.jpg',
  'https://i.postimg.cc/Bv8q8yz0/36-girl-with-butterfly-wings-to-color.jpg',
  'https://i.postimg.cc/Bv8q8yz0/36-girl-with-butterfly-wings-to-color.jpg',
  'https://i.postimg.cc/pLsT5KXD/6331b296558cf1f8f7fd87cc9154f432.jpg',
  'https://i.postimg.cc/2yYmK5Sk/7113dc553901fe5719b2c9e221449e28.jpg',
  'https://i.postimg.cc/MKxKs9n7/adorable-fun-kids-coloring-page-delight-freepik-908673-3027.jpg',
  'https://i.postimg.cc/MKxKs9n7/adorable-fun-kids-coloring-page-delight-freepik-908673-3027.jpg',
  'https://i.postimg.cc/jS1TrcSk/Barbie-10.jpg',
  'https://i.postimg.cc/FsDmTN5v/Barbie-24.jpg',
  'https://i.postimg.cc/FsDmTN5v/Barbie-24.jpg',
  'https://i.postimg.cc/j2YdYXZr/Barbie-27.jpg',
  'https://i.postimg.cc/tTxCcfd5/Barbie-6.jpg'
];
const saved = [];
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');

// VIEW SWITCHING
function showView(id) {
  document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

// HOME
document.getElementById('openLibrary').onclick = () => {
  refreshLibrary();
  showView('library');
};
document.getElementById('openPages').onclick = () => {
  refreshPageSelector();
  showView('pageSelect');
};

// BACK BUTTONS
document.getElementById('backFromLibrary').onclick = () => showView('home');
document.getElementById('backFromPages').onclick = () => showView('home');
document.getElementById('backFromDrawing').onclick = () => showView('home');

// LIBRARY
function refreshLibrary() {
  const list = document.getElementById('savedList');
  list.innerHTML = '';
  if (saved.length === 0) list.textContent = 'No saved images yet.';
  saved.forEach(d => {
    const img = document.createElement('img');
    img.src = d;
    list.appendChild(img);
  });
}

// PAGE SELECTOR
function refreshPageSelector() {
  const list = document.getElementById('pageList');
  list.innerHTML = '';
  drawings.forEach((src, i) => {
    const img = document.createElement('img');
    img.src = src;
    img.onclick = () => loadDrawing(src);
    list.appendChild(img);
  });
}

// DRAWING LOGIC
function loadDrawing(src) {
  const img = new Image();
  img.crossOrigin = 'anonymous';
  img.onload = () => {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    const ratio = Math.min(canvas.width / img.width, canvas.height / img.height);
    const w = img.width * ratio;
    const h = img.height * ratio;
    ctx.drawImage(img, (canvas.width - w) / 2, (canvas.height - h) / 2, w, h);
    showView('drawing');
  };
  img.src = src + '?v=' + Date.now();
}

// DONE: Quick placeholder "save", just stores current canvas in memory
document.getElementById('canvas').onclick = () => {
  saved.push(canvas.toDataURL());
  alert('Saved snapshot to Library!');
};
</script>
</body>
</html>
