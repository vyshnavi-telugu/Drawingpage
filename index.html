<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Colouring App</title>
  <style>
    body, html { margin:0; padding:0; height:100%; }
    body {
      background: linear-gradient(to bottom right, brown, red);
      display: flex; justify-content: center; align-items: center;
      font-family: sans-serif;
    }
    #app { width:100%; max-width:480px; margin:auto; }
    header { text-align:center; color:#fff; padding:1rem; font-size:1.5rem; }
    .home, .editor { display:none; flex-direction:column; }
    .active { display:flex; }
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Colouring Book App</title>
  <style>
    html, body { margin:0; padding:0; height:100%; }
    body {
      background: linear-gradient(to bottom right, brown, red);
      display: flex; justify-content: center; align-items: center;
      font-family: sans-serif;
    }
    #app { width:100%; max-width:480px; margin:auto; }
    header { text-align:center; color:#fff; padding:1rem; font-size:1.5rem; }
    .home, .editor { display:none; flex-direction:column; }
    .active { display:flex; }
    .toolbar, .library, .palette { display:flex; flex-wrap:wrap; gap:10px; justify-content:center; padding:1rem; }
    .thumb {
      width:100px; height:140px;
      background:#fff; border:1px solid #ccc;
      cursor:pointer; display:flex; align-items:center; justify-content:center;
      text-align:center; font-size:0.9rem;
    }
    .toolbar img, .toolbar button {
      width:32px; height:32px;
      background:none; border:none; cursor:pointer;
      font-size:1.2rem;
    }
    .color-swatch {
      width:24px; height:24px; border:2px solid #777;
      cursor:pointer;
    }
    #canvas { background:#fff; touch-action:none; border:1px solid #ccc; }
    .selected-swatch { border:4px solid #000; }
  </style>
</head>
<body>
  <div id="app">
    <header>üé® Colouring Book App</header>

    <div id="home" class="home active">
      <button id="toLibrary">Choose a Page</button>
      <section id="library" class="library"></section>
    </div>

    <div id="editor" class="editor">
      <div class="toolbar">
        <img id="bucketTool" src="https://img.icons8.com/ios-filled/50/000000/paint-bucket.png" title="Fill"/>
        <img id="eraserTool" src="https://img.icons8.com/ios-filled/50/000000/eraser.png" title="Eraser"/>
        <button id="undo">‚Ü∂</button>
        <button id="redo">‚Ü∑</button>
        <button id="clear">‚úï</button>
        <button id="save">üíæ</button>
        <button id="download">‚¨áÔ∏è</button>
      </div>
      <div class="palette"></div>
      <canvas id="canvas" width="360" height="480"></canvas>
      <button onclick="goHome()">üè† Home</button>
    </div>
  </div>

  <script>
    const pages = [
      { name: "Page 1", src: "https://yourdomain.com/page1.png" },
      { name: "Page 2", src: "https://yourdomain.com/page2.png" },
      { name: "Page 3", src: "https://yourdomain.com/page3.png" }
    ];
    const colours = ['#FF0000','#00FF00','#0000FF','#FFFF00','#FF00FF','#00FFFF','#000000','#FFFFFF'];

    const home = document.getElementById('home'),
          library = document.getElementById('library'),
          editor = document.getElementById('editor'),
          canvas = document.getElementById('canvas'),
          ctx = canvas.getContext('2d');

    let currentTool = 'bucket',
        currentColor = colours[0],
        scale = 1,
        lastDist = 0,
        history = [], redoStack = [];

    pages.forEach(p => {
      const div = document.createElement('div');
      div.className = 'thumb';
      div.textContent = p.name;
      div.dataset.src = p.src;
      library.appendChild(div);
    });

    const paletteDiv = document.querySelector('.palette');
    colours.forEach(c => {
      const sw = document.createElement('div');
      sw.className = 'color-swatch';
      sw.style.background = c;
      if (c === currentColor) sw.classList.add('selected-swatch');
      sw.addEventListener('click', () => {
        document.querySelectorAll('.color-swatch').forEach(el => el.classList.remove('selected-swatch'));
        sw.classList.add('selected-swatch');
        currentColor = c;
      });
      paletteDiv.appendChild(sw);
    });

    document.getElementById('toLibrary').onclick = goHome;

    library.addEventListener('click', e => {
      if(!e.target.classList.contains('thumb')) return;
      loadImage(e.target.dataset.src);
    });

    function goHome() {
      home.classList.add('active');
      editor.classList.remove('active');
    }

    function loadImage(src) {
      const img = new Image();
      img.crossOrigin = "anonymous";
      img.src = src;
      img.onload = () => {
        ctx.setTransform(1,0,0,1,0,0);
        scale = 1;
        ctx.clearRect(0,0,canvas.width,canvas.height);
        ctx.drawImage(img, 0,0, canvas.width, canvas.height);
        pushHistory();
        home.classList.remove('active');
        editor.classList.add('active');
      };
    }

    ['bucketTool','eraserTool'].forEach(id => {
      document.getElementById(id).onclick = () => currentTool = id === 'bucketTool' ? 'bucket' : 'eraser';
    });

    canvas.addEventListener('mousedown', e => {
      paint(e.clientX, e.clientY);
    });

    function paint(cx, cy) {
      const rect = canvas.getBoundingClientRect(),
            x = (cx - rect.left) / scale,
            y = (cy - rect.top) / scale;
      ctx.fillStyle = currentTool === 'bucket' ? currentColor : '#FFFFFF';
      ctx.fillRect(x - 10, y - 10, 20, 20);
      pushHistory();
    }

    function pushHistory() {
      history.push(canvas.toDataURL());
      if(history.length > 50) history.shift();
      redoStack = [];
    }

    document.getElementById('undo').onclick = () => {
      if(history.length > 1) {
        redoStack.push(history.pop());
        const img = new Image();
        img.src = history[history.length - 1];
        img.onload = () => ctx.drawImage(img, 0, 0);
      }
    };

    document.getElementById('redo').onclick = () => {
      if(redoStack.length) {
        const data = redoStack.pop();
        history.push(data);
        const img = new Image();
        img.src = data;
        img.onload = () => ctx.drawImage(img, 0, 0);
      }
    };

    document.getElementById('clear').onclick = () => {
      ctx.clearRect(0,0,canvas.width,canvas.height);
      pushHistory();
    };
    document.getElementById('save').onclick = () => {
      pushHistory();
      alert('Drawing saved!');
    };
    document.getElementById('download').onclick = () => {
      const a = document.createElement('a');
      a.href = canvas.toDataURL('image/png');
      a.download = 'coloring.png';
      a.click();
    };

    canvas.addEventListener('touchstart', e => {
      if(e.touches.length === 2) {
        lastDist = Math.hypot(
          e.touches[0].pageX - e.touches[1].pageX,
          e.touches[0].pageY - e.touches[1].pageY
        );
      }
    });

    canvas.addEventListener('touchmove', e => {
      if(e.touches.length === 2) {
        e.preventDefault();
        const curr = Math.hypot(
          e.touches[0].pageX - e.touches[1].pageX,
          e.touches[0].pageY - e.touches[1].pageY
        );
        const delta = curr / lastDist;
        lastDist = curr;
        scale *= delta;
        redrawZoom();
      }
    });

    function redrawZoom() {
      const img = new Image();
      img.src = history[history.length - 1];
      img.onload = () => {
        ctx.setTransform(scale, 0, 0, scale, 0, 0);
        ctx.clearRect(0, 0, canvas.width/scale, canvas.height/scale);
        ctx.drawImage(img, 0, 0, canvas.width/scale, canvas.height/scale);
      };
    }

    pushHistory();
  </script>
</body>
</html>
